## configuration file for requestPredicatesAuthorizer
permissions:
    # admin role can do everything
    - role: admin
      predicate: path-prefix[path="/"]
      priority: 0

    - role: admin
      predicate: path-prefix[path="/user"]
      priority: 10

    # user role can do everything on /{username} with filter
    - roles:
        - user
        - admin
      predicate: path-template[value="/{username}"] and equals[%u, "${username}"]
      priority: 100
      readFilter: '{"status": "public"}'
      writeFilter: '{"status": "public"}'

    - role: user
      predicate: path-template[value="/{username}/{subpath}"] and equals[%u, "${username}"]
      priority: 100
      readFilter: '{"status": "public"}'
      writeFilter: '{"status": "public"}'