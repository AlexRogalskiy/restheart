{
   "descriptor":"testapp",
   "schema":"type Product {_id: ObjectId! name: String! abstract: String compatibility: [String] related_products: [Product] teaser_image: Picture} type Picture {_id: ObjectId! url: String width: Float height: Float} type Query {Products(lang: String!, skip: Int = 0, limit: Int = 0, sort: Int = 1): [Product] Product(_id: ObjectId!): Product Picture(_id: ObjectId!): Picture}",
   "mappings":{
      "Query":{
         "Products":{
            "db":"restheart",
            "collection":"customer",
            "find":{
               "$and":[
                  {
                     "type":"product"
                  },
                  {
                     "lang":{
                        "$arg":"lang"
                     }
                  }
               ]
            },
            "limit":{
               "$arg":"limit"
            },
            "skip":{
               "$arg":"skip"
            },
            "sort":{
               "_id":{
                  "$arg":"sort"
               }
            }
         },
         "Product":{
            "db":"restheart",
            "collection":"customer",
            "find":{
               "$and":[
                  {
                     "type":"product"
                  },
                  {
                     "_id":{
                        "$arg":"_id"
                     }
                  }
               ]
            }
         },
         "Picture":{
            "db":"restheart",
            "collection":"customer",
            "find":{
               "$and":[
                  {
                     "type":"picture"
                  },
                  {
                     "_id":{
                        "$arg":"_id"
                     }
                  }
               ]
            }
         }
      },
      "Product":{
         "abstract": {
           "alias": "abs"
         },
         "compatibility":{
           "alias": "property.cpt"
         },
         "related_products":{
            "db":"restheart",
            "collection":"customer",
            "find":{
               "_id":{
                  "$in":{
                     "$fk":"related_products_ids"
                  }
               }
            }
         },
         "teaser_image":{
            "db":"restheart",
            "collection":"customer",
            "find":{
               "_id":{
                  "$fk":"teaser_image_id"
               }
            }
         }
      }
   }
}
